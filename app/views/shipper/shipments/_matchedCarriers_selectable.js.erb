<% content_for(:after_js) do %>
<%= javascript_tag do %>

$(document).ready(function() {
  var selectedCarriersInput = document.querySelector("#quoteRequestCarriers_carrier_ids");
  var inputValues = selectedCarriersInput.value;
  var carrierCards = document.querySelectorAll(".card__carrier");
  var carrierIdArray = [];
  carrierCards.forEach(function(card, i) {
    selectedCarriersInput.selectedIndex = 0;
    var cardValue = card.attributes[0].value;
    // On click
    card.addEventListener("click", function(e) {
      var clickedCard = $(e.target).closest("div.card__carrier");
      var selectedCarrierId = clickedCard.find(".carrier__id")[0].id;

      clickedCard.toggleClass("selected");

      if(clickedCard.hasClass("selected")) {
        inputValues = carrierIdArray.push(selectedCarrierId);
        console.log('----ARRAY----');
        console.log(carrierIdArray)
      } else if(!clickedCard.hasClass("selected")) {
        console.log('----ARRAY----');
        console.log(carrierIdArray)
        inputValues = inputValues.splice(inputValues.indexOf(selectedCarrierId), 1);
      }
      console.log('----FINAL----');
      console.log(inputValues);
    });
  })
});

<% end %>
<% end %>