<% content_for(:after_js) do %>
<%= javascript_tag do %>

$(document).ready(function() {
  var selectedCarriersInput = document.querySelector("#quoteRequestCarriers_carrier_ids");
  var inputValues = selectedCarriersInput.value;
  var clickTargets = document.querySelectorAll(".card__btn");
  var carrierIdArray = [];
  clickTargets.forEach(function(btn, i) {
    selectedCarriersInput.selectedIndex = 0;
    var cardValue = btn.attributes[0].value;
    // On click
    btn.addEventListener("click", function(e) {
      var clickedCard = $(e.target).closest("div.card__carrier");
      var selectedCarrierId = clickedCard.find(".carrier__id")[0].id;
      clickedCard.toggleClass("selected");
      if(clickedCard.hasClass("selected")) {
        carrierIdArray.push(selectedCarrierId);
        inputValues = carrierIdArray;
        // console.log('----ADD----');
        // console.log(carrierIdArray)
        // console.log(inputValues);
      } else if(!clickedCard.hasClass("selected")) {
        carrierIdArray.splice(carrierIdArray.indexOf(selectedCarrierId), 1);
        inputValues = carrierIdArray;
        // console.log('----REMOVE----');
        // console.log(carrierIdArray)
        // console.log(inputValues);
      }
      console.log('----FINAL----');
      // console.log(carrierIdArray)
      // console.log(selectedCarriersInput);
      // console.log(inputValues);
    });
  })
});

<% end %>
<% end %>