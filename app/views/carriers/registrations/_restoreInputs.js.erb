<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    document.addEventListener("DOMContentLoaded", () => {

      // Get stored input and retrieve previous selected inputs
      const inputBank = JSON.parse(document.querySelector('.inputBank').textContent);
      const areasCovered = inputBank['carrier']['areas_covered'];

      // Cross check the 'stored inputs' against the 'available inputs', and check if true
      const checkedPrefectures = Array.from(
        document.querySelectorAll("input[data-name='selectItemcarrier[areas_covered][]']"))
        .filter(input => areasCovered.includes(input.value))
        .forEach(input => input.checked = true);
      const checkedRegions = Array.from(document.querySelectorAll("input[data-name='selectGroupcarrier[areas_covered][]']"))
        .filter(input => areasCovered.includes(input.computedName))
        .forEach(input => input.checked = true);
      const checkedCountry = document.querySelector("input[data-name='selectAllcarrier[areas_covered][]']").computedName.includes(areasCovered);
      if(checkedCountry) checkedCountry.checked = true;

      // Replace placeholder text with the selected prefectures
      const placeholder = document.querySelector('span.placeholder');
      placeholder.textContent = areasCovered.join('„ÄÅ');

    });
  <% end %>
<% end %>