<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).ready(function() {

    const carrierCards = document.querySelectorAll('.cardCShowDetail');
    carrierCards.forEach(function(card) {
      card.addEventListener('click', handleClick)
    });

    function handleClick(e) {
      const ect = e.currentTarget;
      const cTC = ect.querySelector("[data-name='clickToClose']");
      const cTO = ect.querySelector("[data-name='clickToOpen']");
      const detail = ect.parentElement.querySelector(".cardCDetail");
      detail.addEventListener('transitionend', fadeIn);

      function fadeIn(e) {
        if(e.propertyName === "max-height") {
          e.currentTarget.classList.toggle('fadeIn');
        }
      }

      if(detail.classList.contains('fadeIn')) {
        detail.classList.remove('fadeIn');
      }
      detail.classList.toggle('activated');
      cTO.classList.toggle('hidden');
      cTC.classList.toggle('hidden');

    }

    });
  <% end %>
<% end %>